# 캠페인 등록 테스트 시나리오

## 1. 비즈니스 계정 로그인
- URL: `/login`
- 비즈니스 계정으로 로그인
- 성공 시 `/business/dashboard`로 리다이렉트

## 2. 새 캠페인 만들기
- URL: `/business/campaigns/new`
- "새 캠페인 만들기" 버튼 클릭

### Step 1: 기본 정보 입력
- 제목: "2024 여름 스킨케어 신제품 체험단"
- 설명: "새로운 비타민C 세럼을 체험하고 솔직한 리뷰를 남겨주세요"
- 플랫폼: Instagram 선택

### Step 2: 상세 정보 입력
- 예산: 1,000,000원
- 목표 팔로워수: 10,000명
- 최대 지원자 수: 50명
- 시작일: 오늘 이후 날짜
- 종료일: 시작일 + 30일
- 발표일: 시작일 - 2일
- 요구사항: "스킨케어에 관심이 많은 20-30대 여성"
- 해시태그: "#비타민C세럼 #스킨케어 #신제품체험"

### Step 3: 이미지 업로드
- 헤더 배경 이미지: 1920x600px 이미지 업로드
- 썸네일 이미지: 600x400px 이미지 업로드
- 상품 이미지 3장: 각각 800x800px 이미지 업로드
- YouTube URL (선택): 제품 소개 영상 URL

### Step 4: 결제
- 결제 방법 선택:
  - 신용카드: 토스페이먼츠 결제창으로 이동
  - 계좌이체: 즉시 결제 완료 처리
  - 휴대폰 결제: 토스페이먼츠 결제창으로 이동

## 3. 테스트 항목

### 이미지 업로드 테스트
1. **파일 크기 제한**: 15MB 초과 파일 업로드 시 에러 메시지
2. **파일 형식 제한**: jpg, png, webp만 허용
3. **이미지 리사이징**: 캠페인 이미지는 자동으로 1200px 너비로 리사이징
4. **업로드 진행 표시**: "업로드 중..." 메시지 표시
5. **이미지 미리보기**: 업로드 완료 시 즉시 미리보기
6. **이미지 삭제**: X 버튼으로 업로드된 이미지 삭제

### API 호출 확인
1. **이미지 업로드 API**:
   - Endpoint: `POST /api/upload`
   - Headers: Authorization, x-user-id
   - FormData: file, type='campaign'
   - Response: { url, filename, size, type }

2. **캠페인 생성 API**:
   - Endpoint: `POST /api/business/campaigns`
   - 필수 필드 검증
   - 날짜 유효성 검증
   - Response: { message, campaign }

3. **결제 API**:
   - 계좌이체: `POST /api/payments/direct`
   - 카드/휴대폰: `POST /api/payments/prepare`

4. **캠페인 활성화 API**:
   - Endpoint: `POST /api/business/campaigns/[id]/publish`
   - 결제 완료 후 자동 호출

### 에러 케이스 테스트
1. **이미지 업로드 실패**:
   - 네트워크 오류 시 재시도 버튼
   - 지원하지 않는 형식 업로드 시 에러

2. **필수 필드 누락**:
   - 각 단계별 필수 필드 검증
   - 구체적인 에러 메시지 표시

3. **날짜 유효성**:
   - 시작일 < 오늘: "시작일은 오늘 날짜 이후여야 합니다"
   - 종료일 < 시작일: "종료일은 시작일 이후여야 합니다"
   - 발표일 > 시작일: "발표일은 캠페인 시작일 이전이어야 합니다"

4. **결제 실패**:
   - 결제 취소 시 캠페인은 DRAFT 상태 유지
   - 에러 메시지 표시 후 재시도 가능

## 4. 성공 플로우
1. 모든 정보 입력 완료
2. 이미지 업로드 성공
3. 결제 완료
4. 캠페인 활성화
5. 캠페인 상세 페이지로 리다이렉트
6. 대시보드에서 생성된 캠페인 확인

## 5. 데이터베이스 확인
- campaigns 테이블: 새 캠페인 레코드 생성
- payments 테이블: 결제 정보 저장
- revenue 테이블: 플랫폼 수수료 기록
- 파일 시스템: /public/uploads/campaign/ 폴더에 이미지 저장